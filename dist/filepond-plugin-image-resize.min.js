/*
 * FilePondPluginImageResize 2.0.1
 * Licensed under MIT, https://opensource.org/licenses/MIT
 * Please visit https://pqina.nl/filepond for details.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.FilePondPluginImageResize=t()}(this,function(){"use strict";var e=function(e){var t=e.addFilter,n=e.utils.Type;return t("DID_LOAD_ITEM",function(c,e){var I=e.query;return new Promise(function(a,e){var t=c.file;if(!/^image/.test(t.type)||!I("GET_ALLOW_IMAGE_RESIZE"))return a(c);var o=I("GET_IMAGE_RESIZE_MODE"),n=I("GET_IMAGE_RESIZE_TARGET_WIDTH"),i=I("GET_IMAGE_RESIZE_TARGET_HEIGHT"),r=I("GET_IMAGE_RESIZE_UPSCALE");if(null===n&&null===i)return a(c);var u,d,l,E=null===n?i:n,s=null===i?E:i,f=URL.createObjectURL(t);u=f,d=function(e,t){URL.revokeObjectURL(f);var n=(c.getMetadata("exif")||{}).orientation||-1;if(5<=n&&n<=8){var i=[t,e];e=i[0],t=i[1]}return e===E&&t===s?a(c):e<=E&&t<=s&&!r?a(c):(c.setMetadata("resize",{mode:o,upscale:r,size:{width:E,height:s}}),void a(c))},(l=new Image).onload=function(){var e=l.naturalWidth,t=l.naturalHeight;l=null,d(e,t)},l.src=u})}),{options:{allowImageResize:[!0,n.BOOLEAN],imageResizeMode:["cover",n.STRING],imageResizeUpscale:[!0,n.BOOLEAN],imageResizeTargetWidth:[null,n.INT],imageResizeTargetHeight:[null,n.INT]}}};return"undefined"!=typeof window&&void 0!==window.document&&document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});