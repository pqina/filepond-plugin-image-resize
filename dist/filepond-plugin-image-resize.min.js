/*!
 * FilePondPluginImageResize 2.0.5
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilePondPluginImageResize=t()}(this,function(){"use strict";function e(e){this.wrapped=e}function t(t){var n,r;function i(n,r){try{var u=t[n](r),a=u.value,l=a instanceof e;Promise.resolve(l?a.wrapped:a).then(function(e){l?i("next",e):o(u.done?"return":"normal",e)},function(e){i("throw",e)})}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?i(n.key,n.arg):r=null}this._invoke=function(e,t){return new Promise(function(o,u){var a={key:e,arg:t,resolve:o,reject:u,next:null};r?r=r.next=a:(n=r=a,i(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}function n(e){throw new Error('"'+e+'" is read-only')}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)};function r(e,t){return i(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||o()}function i(e){if(Array.isArray(e))return e}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var u=function(e){var t=e.addFilter,i=e.utils.Type;return t("DID_LOAD_ITEM",function(e,t){var i=t.query;return new Promise(function(t,o){var u=e.file;if(!function(e){return/^image/.test(e.type)}(u)||!i("GET_ALLOW_IMAGE_RESIZE"))return t(e);var a=i("GET_IMAGE_RESIZE_MODE"),l=i("GET_IMAGE_RESIZE_TARGET_WIDTH"),c=i("GET_IMAGE_RESIZE_TARGET_HEIGHT"),f=i("GET_IMAGE_RESIZE_UPSCALE");if(null===l&&null===c)return t(e);var s,d,h,v=null===l?c:l,E=null===c?v:c,p=URL.createObjectURL(u);s=p,d=function(i){if(URL.revokeObjectURL(p),!i)return t(e);var o=i.width,u=i.height,l=(e.getMetadata("exif")||{}).orientation||-1;if(l>=5&&l<=8){var c=r((n("imageHeight"),n("imageWidth"),[u,o]),2);o=c[0],u=c[1]}return o===v&&u===E?t(e):o<=v&&u<=E&&!f?t(e):(e.setMetadata("resize",{mode:a,upscale:f,size:{width:v,height:E}}),void t(e))},(h=new Image).onload=function(){var e=h.naturalWidth,t=h.naturalHeight;h=null,d({width:e,height:t})},h.onerror=function(){return d(null)},h.src=s})}),{options:{allowImageResize:[!0,i.BOOLEAN],imageResizeMode:["cover",i.STRING],imageResizeUpscale:[!0,i.BOOLEAN],imageResizeTargetWidth:[null,i.INT],imageResizeTargetHeight:[null,i.INT]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:u})),u});
