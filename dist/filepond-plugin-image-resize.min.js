/*
 * FilePondPluginImageResize 1.2.0-alpha
 * Licensed under MIT, https://opensource.org/licenses/MIT
 * Please visit https://pqina.nl/filepond for details.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.FilePondPluginImageResize=t()}(this,function(){"use strict";var e=function(e){return/^image/.test(e.type)},t=function(e,t){var n=new Image;n.onload=function(){var e=n.naturalWidth,i=n.naturalHeight;n=null,t(e,i)},n.src=e},n=function(n){var i=n.addFilter,r=n.utils,a=r.Type;return i("DID_LOAD_ITEM",function(n,i){var r=i.query;return new Promise(function(i,a){var o=n.file;if(!e(o)||!r("GET_ALLOW_IMAGE_RESIZE"))return i(n);var u=r("GET_IMAGE_RESIZE_MODE"),E=r("GET_IMAGE_RESIZE_TARGET_WIDTH"),d=r("GET_IMAGE_RESIZE_TARGET_HEIGHT"),l=r("GET_IMAGE_RESIZE_UPSCALE");if(null===E&&null===d)return i(n);var s=URL.createObjectURL(o);t(s,function(e,t){return URL.revokeObjectURL(s),e===E&&t===d?i(n):e<=E&&t<=d&&!l?i(n):(n.setMetadata("resize",{mode:u,upscale:l,size:{width:E,height:d}}),void i(n))})})}),{options:{allowImageResize:[!0,a.BOOLEAN],imageResizeMode:["cover",a.STRING],imageResizeUpscale:[!0,a.BOOLEAN],imageResizeTargetWidth:[null,a.INT],imageResizeTargetHeight:[null,a.INT]}}};return"undefined"!=typeof navigator&&document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:n})),n});