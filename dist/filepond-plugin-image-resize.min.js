/*!
 * FilePondPluginImageResize 2.0.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilePondPluginImageResize=t()}(this,function(){"use strict";var e=function(e){var t=e.addFilter,n=e.utils.Type;return t("DID_LOAD_ITEM",function(e,t){var n=t.query;return new Promise(function(t,i){var a=e.file;if(!function(e){return/^image/.test(e.type)}(a)||!n("GET_ALLOW_IMAGE_RESIZE"))return t(e);var o=n("GET_IMAGE_RESIZE_MODE"),r=n("GET_IMAGE_RESIZE_TARGET_WIDTH"),u=n("GET_IMAGE_RESIZE_TARGET_HEIGHT"),l=n("GET_IMAGE_RESIZE_UPSCALE");if(null===r&&null===u)return t(e);var d,E,f,s=null===r?u:r,c=null===u?s:u,I=URL.createObjectURL(a);d=I,E=function(n,i){URL.revokeObjectURL(I);var a=(e.getMetadata("exif")||{}).orientation||-1;if(a>=5&&a<=8){var r=[i,n];n=r[0],i=r[1]}return n===s&&i===c?t(e):n<=s&&i<=c&&!l?t(e):(e.setMetadata("resize",{mode:o,upscale:l,size:{width:s,height:c}}),void t(e))},(f=new Image).onload=function(){var e=f.naturalWidth,t=f.naturalHeight;f=null,E(e,t)},f.src=d})}),{options:{allowImageResize:[!0,n.BOOLEAN],imageResizeMode:["cover",n.STRING],imageResizeUpscale:[!0,n.BOOLEAN],imageResizeTargetWidth:[null,n.INT],imageResizeTargetHeight:[null,n.INT]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});
