/*
 * FilePondPluginImageResize 1.2.0-alpha
 * Licensed under MIT, https://opensource.org/licenses/MIT
 * Please visit https://pqina.nl/filepond for details.
 */
const isImage=e=>/^image/.test(e.type),getImageSize=(e,t)=>{let i=new Image;i.onload=(()=>{const e=i.naturalWidth,a=i.naturalHeight;i=null,t(e,a)}),i.src=e};var plugin$1=e=>{const{addFilter:t,utils:i}=e,{Type:a}=i;return t("DID_LOAD_ITEM",(e,{query:t})=>new Promise((i,a)=>{const n=e.file;if(!isImage(n)||!t("GET_ALLOW_IMAGE_RESIZE"))return i(e);const E=t("GET_IMAGE_RESIZE_MODE"),l=t("GET_IMAGE_RESIZE_TARGET_WIDTH"),o=t("GET_IMAGE_RESIZE_TARGET_HEIGHT"),s=t("GET_IMAGE_RESIZE_UPSCALE");if(null===l&&null===o)return i(e);const g=URL.createObjectURL(n);getImageSize(g,(t,a)=>(URL.revokeObjectURL(g),t===l&&a===o?i(e):t<=l&&a<=o&&!s?i(e):(e.setMetadata("resize",{mode:E,upscale:s,size:{width:l,height:o}}),void i(e))))})),{options:{allowImageResize:[!0,a.BOOLEAN],imageResizeMode:["cover",a.STRING],imageResizeUpscale:[!0,a.BOOLEAN],imageResizeTargetWidth:[null,a.INT],imageResizeTargetHeight:[null,a.INT]}}};"undefined"!=typeof navigator&&document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:plugin$1}));export default plugin$1;