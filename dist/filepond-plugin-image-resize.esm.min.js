/*
 * FilePondPluginImageResize 2.0.2
 * Licensed under MIT, https://opensource.org/licenses/MIT
 * Please visit https://pqina.nl/filepond for details.
 */

/* eslint-disable */
const isImage=e=>/^image/.test(e.type),getImageSize=(e,t)=>{let i=new Image;i.onload=(()=>{const e=i.naturalWidth,n=i.naturalHeight;i=null,t(e,n)}),i.src=e};var plugin$1=e=>{const{addFilter:t,utils:i}=e,{Type:n}=i;return t("DID_LOAD_ITEM",(e,{query:t})=>new Promise((i,n)=>{const a=e.file;if(!isImage(a)||!t("GET_ALLOW_IMAGE_RESIZE"))return i(e);const l=t("GET_IMAGE_RESIZE_MODE"),o=t("GET_IMAGE_RESIZE_TARGET_WIDTH"),s=t("GET_IMAGE_RESIZE_TARGET_HEIGHT"),E=t("GET_IMAGE_RESIZE_UPSCALE");if(null===o&&null===s)return i(e);const r=null===o?s:o,u=null===s?r:s,d=URL.createObjectURL(a);getImageSize(d,(t,n)=>{URL.revokeObjectURL(d);const a=(e.getMetadata("exif")||{}).orientation||-1;return a>=5&&a<=8&&([t,n]=[n,t]),t===r&&n===u?i(e):t<=r&&n<=u&&!E?i(e):(e.setMetadata("resize",{mode:l,upscale:E,size:{width:r,height:u}}),void i(e))})})),{options:{allowImageResize:[!0,n.BOOLEAN],imageResizeMode:["cover",n.STRING],imageResizeUpscale:[!0,n.BOOLEAN],imageResizeTargetWidth:[null,n.INT],imageResizeTargetHeight:[null,n.INT]}}};const isBrowser="undefined"!=typeof window&&void 0!==window.document;isBrowser&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:plugin$1}));export default plugin$1;