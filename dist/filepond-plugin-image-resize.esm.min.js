/*!
 * FilePondPluginImageResize 2.0.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

const e=({addFilter:e,utils:t})=>{const{Type:i}=t;return e("DID_LOAD_ITEM",(e,{query:t})=>new Promise((i,n)=>{const a=e.file;if(!(e=>/^image/.test(e.type))(a)||!t("GET_ALLOW_IMAGE_RESIZE"))return i(e);const l=t("GET_IMAGE_RESIZE_MODE"),o=t("GET_IMAGE_RESIZE_TARGET_WIDTH"),E=t("GET_IMAGE_RESIZE_TARGET_HEIGHT"),d=t("GET_IMAGE_RESIZE_UPSCALE");if(null===o&&null===E)return i(e);const s=null===o?E:o,r=null===E?s:E,u=URL.createObjectURL(a);((e,t)=>{let i=new Image;i.onload=(()=>{const e=i.naturalWidth,n=i.naturalHeight;i=null,t(e,n)}),i.src=e})(u,(t,n)=>{URL.revokeObjectURL(u);const a=(e.getMetadata("exif")||{}).orientation||-1;return a>=5&&a<=8&&([t,n]=[n,t]),t===s&&n===r?i(e):t<=s&&n<=r&&!d?i(e):(e.setMetadata("resize",{mode:l,upscale:d,size:{width:s,height:r}}),void i(e))})})),{options:{allowImageResize:[!0,i.BOOLEAN],imageResizeMode:["cover",i.STRING],imageResizeUpscale:[!0,i.BOOLEAN],imageResizeTargetWidth:[null,i.INT],imageResizeTargetHeight:[null,i.INT]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e}));export default e;
