/*
 * FilePondPluginImageResize 2.0.1
 * Licensed under MIT, https://opensource.org/licenses/MIT
 * Please visit https://pqina.nl/filepond for details.
 */
const isImage=e=>/^image/.test(e.type),getImageSize=(e,t)=>{let i=new Image;i.onload=(()=>{const e=i.naturalWidth,n=i.naturalHeight;i=null,t(e,n)}),i.src=e};var plugin$1=e=>{const{addFilter:t,utils:i}=e,{Type:n}=i;return t("DID_LOAD_ITEM",(e,{query:t})=>new Promise((i,n)=>{const a=e.file;if(!isImage(a)||!t("GET_ALLOW_IMAGE_RESIZE"))return i(e);const l=t("GET_IMAGE_RESIZE_MODE"),E=t("GET_IMAGE_RESIZE_TARGET_WIDTH"),o=t("GET_IMAGE_RESIZE_TARGET_HEIGHT"),s=t("GET_IMAGE_RESIZE_UPSCALE");if(null===E&&null===o)return i(e);const u=null===E?o:E,g=null===o?u:o,r=URL.createObjectURL(a);getImageSize(r,(t,n)=>{URL.revokeObjectURL(r);const a=(e.getMetadata("exif")||{}).orientation||-1;return a>=5&&a<=8&&([t,n]=[n,t]),t===u&&n===g?i(e):t<=u&&n<=g&&!s?i(e):(e.setMetadata("resize",{mode:l,upscale:s,size:{width:u,height:g}}),void i(e))})})),{options:{allowImageResize:[!0,n.BOOLEAN],imageResizeMode:["cover",n.STRING],imageResizeUpscale:[!0,n.BOOLEAN],imageResizeTargetWidth:[null,n.INT],imageResizeTargetHeight:[null,n.INT]}}};"undefined"!=typeof navigator&&document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:plugin$1}));export default plugin$1;